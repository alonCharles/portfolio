<h2>Shopping Cart</h2>

<ng-container *ngIf="cartItems$ | async as items">
    <div *ngIf="!items || items.length === 0" class="empty-cart">
        Your cart is empty!
    </div>

    <div *ngIf="items && items.length > 0" class="cart-container">
        <ul>
            <li class="cart-header">
                <span class="items-details">Product</span>
                <span class="items-quantity">Quantity</span>
                <span class="items-price">Price</span>
                <span class="items-total">Total</span>
                <span class="items-actions">Actions</span>
            </li>
            <li *ngFor="let item of items" class="cart-item">
                <div>
                    <img [src]='item.imageUrl' alt="item.name" class="item-image">
                    <span>{{ item.name }}</span>
                </div>
                <div>
                    <button (click)="decrease(item.productId)" class="quantity-btn">-</button>
                    <span>{{ item.quantity }}</span>
                    <button (click)="increase(item.productId)" class="quantity-btn">+</button>
                </div>
                <span class="item-price">{{ item.price | currency: 'USD': 'symbol' }}</span>
                <span class="item-total">{{ item.lineTotal | currency: 'USD': 'symbol' }}</span>
                <div class="item-actions">
                    <button (click)="remove(item.productId)" > Remove Item</button>
                </div>
            </li>
            <div>
                <button (click)="clear()" >
                    <div>
                        <strong>Total: {{ totalPrice$ | async | currency:"USD": 'symbol' }}</strong>
                    </div>
                </button>
            </div>
        </ul>
    </div>
</ng-container>